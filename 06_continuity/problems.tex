\section{Continuity}

\begin{problem}
  Assume $f(x) \geq g(x)$ for all $x \in \R$ and $f$ and $g$ are continuous
  everywhere. Show that for any point $c$ we must have $\lim\limits_{x \to c}
  f(x) \geq \lim\limits_{x \to c} g(x)$.

  \begin{proof}
    Let $c$ be arbitrary. By continuity of $f$ and $g$ at $c$, we know that 
    \[
      \lim\limits_{x \to c} f(x) = f(c), \qquad \lim\limits_{x \to c} g(x) = g(c).
    \] 
    Since $f(x) \geq g(x)$ for all $x \in \R$, it follows that 
    \[
      f(c) = \lim\limits_{x \to c} f(x) \geq \lim\limits_{x \to c} g(x) = g(c).
    \]
  \end{proof}

\end{problem}

\begin{problem}
  \label{prob:composition-continuous}
  Show that the composition of continuous functions is continuous.

  \begin{proof}
    Let $f : \R \to \R$ and $g : \R \to \R$ be continuous. We will show that
    $f \circ g$ is continuous everywhere.

    Let $\eps > 0$ be given. By continuity of $f$, we know that for our given $\eps$,
    there exists some $\delta' > 0$ such that
    \[
      \forall x \in \R.\, \abs{g(x) - g(c)} < \delta' \implies \abs{f(g(x)) - f(g(c))} < \eps.
    \]
    Using a satisfying $\delta'$, we see, by continuity of $g$, that there
    exists $\delta > 0$ such that
    \[
      \forall x \in \R.\, \abs{x - c} < \delta \implies \abs{g(x) - g(c)} < \delta'.
    \]
    Taken together, we have
    \[
      \forall x \in \R.\, \abs{x - c} < \delta \implies \abs{f(g(x)) - f(g(c))} < \eps.
    \]
    Hence, $f \circ g$ is continuous at $c$, which was arbitrary, so $f \circ
    g$ is continuous everywhere.
  \end{proof}

\end{problem}

\begin{problem}
  If $f$ is continuous at $c$ and $f(c) > 0$, show that there exists a $\delta > 0$ such that $f(x) > 0$ for all
  $x$ satisfying $\abs{x - c} < \delta$ (i.e., if $f(c) > 0$, there is a region around $c$ where $f$ is greater than $0$).

  \begin{proof}
    Set $\eps = \dfrac{f(c)}{2} > 0$. By continuity of $f$ at $c$, we can obtain a $\delta > 0$ such that
    \[
      \forall x \in \R.\, \abs{x - c} < \delta \implies \abs{f(x) - f(c)} < \eps.
    \]
    Therefore, for all $x \in \R$ where $\abs{x - c} < \delta$, we have obtained a positive lower bound for $f(x)$:
    \[
      \abs{f(x) - f(c)} < \eps \implies f(c) - \eps < f(x) \implies \frac{f(c)}{2} < f(x).
    \]
  \end{proof}

\end{problem}

\begin{problem}
  Let $g : A \to \R$ and assume that $f$ is a bounded function on $A \subseteq \R$ 
  (i.e., there exists $M > 0$ satisfying $\abs{f(x)} \leq M$ for all $x \in A$).
  Show that if $\lim\limits_{x \to c} g(x) = 0$, then $\lim\limits_{x \to
  c} g(x)f(x) = 0$ as well.

  \begin{proof}
    Let $\eps > 0$ be given. We want to show that there exists a $\delta > 0$
    such that if $0 < \abs{x - c} < \delta$ and $x \in A$, then $\abs{g(x)f(x)} < \eps$.

    Since $f$ is bounded on $A$, there exists a constant $M > 0$ such that
    $\abs{f(x)} \leq M$ for all $x \in A$. Because $g(x) \to 0$ as $x \to c$,
    by the definition of the limit, there exists a $\delta' > 0$ such that
    \[
      \forall x \in A.\, 0 < \abs{x - c} < \delta' \implies \abs{g(x)} < \frac{\eps}{M}.
    \]
    Now, consider $\abs{g(x)f(x)}$. For any $x \in A$ such that $0 < \abs{x - c} < \delta'$ we have
    \[
      \abs{g(x)f(x)} = \abs{g(x)} \abs{f(x)} \leq \abs{g(x)} M.
    \]
    Since $\abs{g(x)} < \dfrac{\eps}{M}$ when $0 < \abs{x - c} < \delta'$ for all $x \in A$,
    it follows that
    \[
      \abs{g(x)f(x)} < \left( \frac{\eps}{M} \right) M = \eps.
    \]

    Therefore, for $\delta = \delta'$, if $0 < \abs{x - c} < \delta$ and $x \in A$, 
    then $\abs{g(x)f(x)} < \eps$. Having found a satisfying $\delta = \delta' > 0$,
    we conclude that $g$ is continuous at $c = 0$.
  \end{proof}

\end{problem}

\begin{problem}
  Let $g(x) = \sqrt[3]{x}$.
  \begin{enumerate}[label=(\alph*)]
    \item Prove that $g$ is continuous at $c = 0$.
      
      \begin{proof}
        To show $g$ is continuous at $c = 0$ it is sufficient to show that $\lim\limits_{x \to 0} g(x) = g(0) = 0$.

        Let $\eps > 0$ be given. We must demonstrate that there exists a $\delta > 0$ such that
        \[
          \forall x \in \R.\, \abs{x} < \delta \implies \abs{\sqrt[3]{x}} < \eps.
        \].

        Set $\delta = \eps^{3}$. Then, for all $x \in \R$, we have
        \[
          \abs{x} < \delta \implies \sqrt[3]{\abs{x}} < \sqrt[3]{\eps^{3}}  \implies \abs{\sqrt[3]{x}} < \eps.
        \]
      \end{proof}

    \item Prove that $g$ is continuous at a point $c \neq 0$.

      \begin{proof}
        To show $g$ is continuous at any $c \neq 0$ it is sufficient to show that $\lim\limits_{x \to c} g(x) = g(c)$.

        First, let $c \neq 0$ and let $\eps > 0$ be given. We must demonstrate that there exists a $\delta > 0$ such that
        \[
          \forall x \in \R.\, \abs{x - c} < \delta \implies \abs{\sqrt[3]{x} - \sqrt[3]{c}} < \eps.
        \]

        We start by bounding $x$ away from $0$, since when
        \begin{equation}
          \label{eq:factored-cbrts}
          \abs{x - c} < \frac{\abs{c}}{2} \implies \abs{\abs{x} - \abs{c}} < \frac{\abs{c}}{2} \implies \abs{c} - \frac{\abs{c}}{2} < \abs{x} < \abs{c} + \frac{\abs{c}}{2},
        \end{equation}
        we have $\abs{x} > \frac{\abs{c}}{2} > 0$.
        
        Notice that
        \[
          \abs{\sqrt[3]{x} - \sqrt[3]{c}} = \abs{x - c} \abs{ \frac{1}{\sqrt[3]{x^{2}} + \sqrt[3]{xc} + \sqrt[3]{c^{2}}} }.
        \]
        Under the assumption that $\abs{x - c} < \frac{\abs{c}}{2}$, we can find
        a constant $m$ that depends on $c$ (but, importantly, not $x$) such that 
        for all $x$ sufficiciently close to $c$, we have 
        $m \leq \abs{ \sqrt[3]{x^{2}} + \sqrt[3]{xc} + \sqrt[3]{c^{2}} }$.
        From this, it will follow that $\lim\limits_{x \to c} \abs{\sqrt[3]{x} - \sqrt[3]{c}} = 0$
        as $\abs{ \frac{1}{\sqrt[3]{x^{2}} + \sqrt[3]{xc} + \sqrt[3]{c^{2}}} }$ is bounded in \eqref{eq:factored-cbrts}.
        Bounding $x$ away from $0$ also ensures that $x$ and $c$ share the same sign
        (for any $x$ such that $\abs{x - c} < \dfrac{\abs{c}}{2}$), thus
        \[
          0 < \abs{ \sqrt[3]{x^{2}} + \sqrt[3]{xc} + \sqrt[3]{c^{2}} } =  \sqrt[3]{x^{2}} + \sqrt[3]{xc} + \sqrt[3]{c^{2}}.
        \]
        By AM-GM\footref{fn:AM-GM}, we have
        \[
          \frac{ \sqrt[3]{x^{2}} + \sqrt[3]{xc} + \sqrt[3]{c^{2}} }{3} \geq \sqrt[3]{ \sqrt[3]{x^{2}} \cdot \sqrt[3]{xc} \cdot \sqrt[3]{c^{2}} } \implies \sqrt[3]{x^{2}} + \sqrt[3]{xc} + \sqrt[3]{c^{2}} \geq 3 \sqrt[3]{xc}.
        \]
        Hence, we can set $m = 3 \sqrt[3]{\dfrac{c^{2}}{2}}$ whenever $\abs{x - c} < \dfrac{\abs{c}}{2}$.

        Therefore, picking $\delta = \min{\left( \dfrac{\abs{c}}{2}, \eps m \right)}$ for the given $\eps$ satisfies
        \[
          \forall x \in \R.\, \abs{x - c} < \delta \implies \abs{\sqrt[3]{x} - \sqrt[3]{c}} < \eps.
        \]
      \end{proof}

  \end{enumerate}

\end{problem}

\begin{problem}
  Prove that there does not exist a continuous function $f$ defined on $\R$ which takes on every value exactly twice.

  \begin{proof}
    Before proceeding with the proof, we will first establish the following
    theorem, which will aid us greatly in the remainder of the proof.

    \begin{theorem}[Intermediate Value Theorem]
      \label{thm:intermediate-value-theorem}
      Suppose function $f : [u, v] \to \R$ is continuous. When 
      \begin{enumerate}[label=(\alph*)]
        \item $f(u) < y < f(v)$ or
        \item $f(u) > y > f(v)$,
      \end{enumerate}
      then, there exists some $c \in (u, v)$ such that $f(c) = y$.
    \end{theorem}

    \begin{subproof}[Proof of \thmref{thm:intermediate-value-theorem}]
      We will only prove the case of $f(u) < y < f(v)$ as the second case is similar.

      Let $A = \{ x \in [u,v] : f(x) < y \}$ and $s = \sup{A}$.
      Note that $s \neq u$ because if it were the case that $s = u$, then $u$ would be both a lower and upper bound for $A$,
      giving $A = \{ u \}$. But, by continuity of $f$, for $\eps = y - f(u)$ there exists a $\delta > 0$
      such that
      \[
        \forall x \in [u, v].\, \abs{x - u} < \delta \implies \abs{f(x) - f(u)} < \eps = y - f(u) \implies f(x) < y,
      \]
      so $\exists x \in [u, v]$ such that $u < x < u + \delta$ and $f(u) < f(x) < y$, contradicting the fact that $u$
      is an upperbound of $A$ and that $A = \{ u \}$).

      Also, $s \neq v$ for a similar reason: supposing (to reach a contradiction) that $s = v$, continuity of $f$ guarantees that a sufficiently small $\delta$-neighborhood of $v$
      can be found in response to the $\eps$-neighbhoorhood where $\eps = f(v) - y$. That is, for all $x \in [u, v]$,
      $x$ being a member of said $\delta$-neighborhood implies that $v = s \geq x$ and $f(x) > y$. This contradicts the fact
      that, by the definition of the supremum, $\exists a \in A$ where $s - \delta < a < s = v$.

      Next, having established that $s \in (u, v)$, we claim that $f(s) = y$.
      To show this, suppose to the contrary, the following two cases:
      \begin{itemize}
        \item Assume $f(s) < y$. Let $\eps = \dfrac{y - f(s)}{2}$. By continuity of $f$, there exists $\delta > 0$ 
          such that
          \[
            \forall x \in [u,v].\, \abs{x - s} < \delta \implies \abs{f(x) - f(s)} < \eps \implies f(x) < f(s) + \eps = \frac{f(s)}{2} + \frac{y}{2} < y,
          \]
          suggesting that $\exists x \in \R$ such that $s < x < \min{(s + \delta, v)}$ and $f(x) < y$.
          This yields a contradiction since $s$ is an upperbound for $A$.

        \item Assume $f(s) > y$. Let $\eps = \dfrac{f(s) - y}{2}$. By continuity of $f$, there exists $\delta > 0$ 
          such that
          \[
            \forall x \in [u,v].\, \abs{x - s} < \delta \implies \abs{f(x) - f(s)} < \eps \implies f(x) > f(s) - \eps = \frac{f(s)}{2} + \frac{y}{2} > y,
          \]
          suggesting that $\forall x \in \R$, if $\max{(s - \delta, u)} < x < s$, then $f(x) > y$. This is contrary to the fact that
          $s$ is the \textit{least} upperbound of $A$.

      \end{itemize}

      Thus, setting $c = s$ gives us $c \in (u, v)$ such that $f(c) = y$.
    \end{subproof}

    % FIX: This proof presupposes $f$ being continuous implies $f$ has intervals over which it is monotonic. 
    Now suppose, for contradiction's sake, that there exists a function $f : \R \to \R$
    that is continuous and takes on every value exactly twice. Our initial
    observation is that $f$ cannot be strictly increasing or decreasing over 
    $\R$ as $f$ would be injective, contradicting the hypothesis that $f$ maps 
    to each real number exactly twice. 

    \begin{callout}[Incorrect Proof!]
      The remainder of the proof is incorrect because it assumes that a continuous function
      must be monotonic over some interval. This is not true -- consider the
      Weierstrass function, which is continuous everywhere but not monotonic
      anywhere.
    \end{callout}

    First, we will show that such a function changes monotonicity exactly once.
    Suppose that $f$ change monotonicity twice. Then, without loss of generality, we will
    assume the domain can be partitioned into $3$ intervals:
    \begin{enumerate}[label=(\roman*)]
      \item $A = (-\infty, x_{1})$, so $f(A)$ is strictly increasing,
      \item $B = [x_{1}, x_{2}]$, so $f(B)$ is strictly decreasing,
      \item $C = (x_{2}, \infty)$, so $f(C)$ is stictly increasing,
    \end{enumerate}
    for some $x_{1} < x_{1}$ in the reals.
    By \thmref{thm:intermediate-value-theorem}, there exists some $y \in f(B)$
    such that $|f^{-1}(y)| \geq 3$, contradicting the hypothesis that $f$ takes
    on every value exactly twice. (Similar reasoning holds when $f$ changes
    monotonicity more than twice.)

    Next, having established that $f$ changes monotonicity exactly once,
    we can partition the domain into $2$ intervals (without loss of generality):
    \begin{enumerate}[label=(\roman*)]
      \item $A = (-\infty, m)$, so $f(A)$ is strictly increasing and
      \item $B = [m, \infty)$, so $f(B)$ is strictly decreasing,
    \end{enumerate}
    for some $m \in \R$.
    Thus, $f(m)$ must be a global maximum. However, for any $y > f(m)$, there
    does not exist an $x \in \R$ such that $f(x) = y$, contradicting the hypothesis that 
    $f$ takes on every value exactly twice.

  \end{proof}

\end{problem}


