\section{Two Hard Theorems (Part 1)}

\begin{problem}
  Is there a continuous function $f : \R \to \R$ where $f(\R) = \Q$? What about $f(\R) = \Z$?

  \vspace{\baselineskip}

  No such function exists for either case.

  \begin{proof}
    Suppose $f : \R \to \R$ is continuous and $f(\R) \subseteq \Q$. 

    If $f$ is not constant, then there exist $a<b$ with $f(a) \neq f(b)$. By
    \thmref{thm:intermediate-value-theorem}, $f([a,b])$ contains every real
    number between $f(a)$ and $f(b)$. But any such interval contains irrational
    values, contradicting $f([a,b]) \subseteq \Q$. Therefore $f$ must be
    constant, so $f(\R)$ is a singleton. This cannot equal $\Q$, hence no such
    function exists.

    The same reasoning applies if we assume $f(\R) \subseteq \Z$. If $f$ takes
    two distinct integer values, \thmref{thm:intermediate-value-theorem} forces
    $f$ to take all real values between them, which are not integers. Thus $f$
    must again be constant, so $f(\R)$ is a singleton and cannot equal $\Z$.
    Therefore, no such function exists in this case either.
  \end{proof}

\end{problem}

\begin{problem}
  Show the following more general consequence of the IVT:

  Suppose $f: \R \to \R$ is continuous, and $f(a) < f(b)$ for some $a < b$. Let
  $u \in (f(a), f(b))$ be a real number. Then there exists a real number $c \in
  (a, b)$ such that $f(c) = u$.

  \begin{proof} 
    See proof of \thmref{thm:intermediate-value-theorem}.
  \end{proof} 
\end{problem}

\begin{problem}
  Let $f : \R \to \R$ be continuous. Suppose that $f([0, 1])$ is contained in $[0, 1]$. Prove that 
  $f$ must have a fixed point; that is, show thaat $f(x) = x$ for at least one value of $x \in [0, 1]$.

  \begin{proof}
    Define $g(x) = f(x) - x$, which is continuous on $[0,1]$.
    Since $f([0,1]) \subseteq [0,1]$, we have
    \[
      g(0) = f(0) - 0 \geq 0, \qquad g(1) = f(1) - 1 \leq 0.
    \]
    If either $g(0) = 0$ or $g(1) = 0$, then $f$ has a fixed point at $0$ or $1$, respectively.
    Otherwise, $g(0) > 0$ and $g(1) < 0$. By \thmref{thm:intermediate-value-theorem},
    there exists $x \in (0,1)$ with $g(x) = 0$, so $f(x) = x$.
    Thus, $f$ has a fixed point in $[0,1]$.
  \end{proof}
\end{problem}

\begin{problem}
  A function $f : \R \to \R$ is increasing if $f(x) \leq f(y)$ for all $x < y$. Show the following converse to the IVT:

  \begin{quote}
    Suppose that $f$ is increasing and satisfies the conclusion of the IVT
    (i.e., for all $x < y$ and all $L$ between $f(x)$ and $f(y)$, there exists
    $c \in (x, y)$ where $f(c) = L$. Then, $f$ is continuous.
  \end{quote}

  \begin{proof}
    We prove the contrapositive. Suppose $f$ is increasing but not continuous
    at some $b \in \R$. We show that the conclusion of the IVT does not hold.

    Define
    \[
      l = \sup \{ f(x) : x < b \}, \qquad u = \inf \{ f(x) : x > b \}.
    \]
    (These sets are well defined since $f$ is increasing, hence, the sets are
    bounded above and below, respectively).
    Since $f$ is not continuous at $b$, we must have $l<u$.
    Let $L = \dfrac{l+u}{2}$, so $l < L < u$.

    By the definition of supremum, for any $\eps > 0$ there exists
    $x_{1} < b$ with $l - \eps < f(x_{1})$, and hence, $f(x_{1}) < L$.
    Similarly, by the definition of infimum, for any $\eps > 0$ there
    exists $x_{2} > b$ with $f(x_{2}) < u + \eps$, and in particular $f(x_{2})>L$. 
    Thus,
    \[
      f(x_{1}) < L < f(x_{2}).
    \]

    Now, for any $x'\in(x_{1},x_{2})$, if $x' < b$ then $f(x') \leq l < L$, and if
    $x' > b$ then $f(x') \geq u>L$. Hence no $x' \in (x_{1}, x_{2})$ satisfies
    $f(x') = L$.

    Therefore, the IVT conclusion fails. This proves the contrapositive.
  \end{proof}

\end{problem}
