% Control (nested) delimiter growth
\delimitershortfall-1sp

% Common math symbols
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\I}{\mathbb{I}}
\newcommand{\eps}{\varepsilon}

\newcommand{\Scal}{\mathcal{S}}

% Problem environment with local numbering per section
\newcounter{problem}[section]
\renewcommand{\theproblem}{\thesection.\arabic{problem}}
\newenvironment{problem}{%
  \refstepcounter{problem}%
  \paragraph{Problem \theproblem.}%
}{}

% Theorem styles
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}

% Reference convenience
\newcommand{\eqnref}[1]{Equation~(\ref{#1})}
\newcommand{\secref}[1]{Section~\ref{#1}}
\newcommand{\thmref}[1]{Theorem~\ref{#1}}
\newcommand{\lemref}[1]{Lemma~\ref{#1}}
\newcommand{\corref}[1]{Corollary~\ref{#1}}
\newcommand{\defref}[1]{Definition~\ref{#1}}
\newcommand{\probref}[1]{Problem~\ref{#1}}

% Custom function convenience
\newcommand{\diam}[1]{\operatorname{diam}(#1)}
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert}

% Subproof environment with black QED
\usepackage{xcolor}
\newenvironment{subproof}[1][Proof]
  {\renewcommand{\qedsymbol}{\ensuremath{\blacksquare}}\begin{proof}[#1]}
  {\end{proof}}

% "Callout" box
\newtcolorbox{callout}[1][]{colback=yellow!10!white, colframe=red!50!black, fonttitle=\bfseries, title=#1}
